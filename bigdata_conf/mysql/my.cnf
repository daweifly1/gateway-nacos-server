#MySQL 5.5.8
[client]
port            = 3306
socket          = /data/mysql/var/mysql.sock
default-character-set = latin1



[mysqld]
sql-mode			= "STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"
skip-external-locking
#sync_binlog			= 600
innodb_old_blocks_time  	= 1000
innodb_flush_method 		= O_DIRECT 
back_log=1000 
#auto_increment_increment 	= 2
auto_increment_offset 		= 1
max_connections 		= 16384
max_user_connections		= 16000
query_cache_size 		= 256M
query_cache_type 		= 0
log_queries_not_using_indexes	= 1 
min_examined_row_limit 		= 16
wait_timeout	    		= 120
interactive_timeout 		= 120

port            		= 3306  
socket          		= /data/mysql/var/mysql.sock
pid-file                        = /data/mysql/var/mysql.pid
user=mysql

skip-slave-start
skip-name-resolve

key_buffer_size			= 2M
read_buffer_size		= 2M
sort_buffer_size		= 2M

#5.1.3 table_cache deprecated
table_open_cache		= 16384

max_allowed_packet 		= 256M
max_connect_errors 		= 1000000
#net_buffer_length 		= 8K
#read_rnd_buffer_size 		= 512K

#default-storage-engine		= InnoDB
character-set-server		= latin1
init-connect			= 'SET NAMES latin1'

#max_connections		= 32000
#binlog_cache_size		= 2M

#query_cache_size 		= 256M 
query_cache_limit 		= 2M

#READ-UNCOMMITTED, READ-COMMITTED, REPEATABLE-READ, SERIALIZABLE
transaction_isolation 		= REPEATABLE-READ
tmp_table_size			= 256M

#--------log---------
long_query_time		= 1
log-error 		= err.log
log_slave_updates	= 1
expire_logs_days	= 99
slow_query_log		= 1

binlog_format		= mixed
#log-bin			= MySql-bin
relay-log           	= relay-bin
slow_query_log_file	= slow.log
log-queries-not-using-indexes  	= true
max-binlog-size     	= 1024M
log_bin_trust_function_creators = 1

#last intranet ip
server-id 		= 1637
gtid-mode           	= off
datadir			= /data/mysql/var
tmpdir			= /tmp/
#--------innodb--------------
#innodb_data_home_dir 	= /data/mysql/ibdata
innodb_autoextend_increment = 256
innodb_data_file_path	= ibdata1:128M;ibdata2:128M:autoextend
innodb_table_locks 	= 0
innodb_lock_wait_timeout = 30

#(50-80)% * total memory ( 5G )
innodb_buffer_pool_size		= 4G 
innodb_buffer_pool_instances 	= 1
innodb_additional_mem_pool_size = 128M 

innodb_max_dirty_pages_pct	= 45
innodb_read_io_threads 		= 8
innodb_write_io_threads 	= 4
innodb_io_capacity		= 2000

#rep
replicate-ignore-db 		= test
replicate-ignore-db 		= information_schema
master-info-repository 		= TABLE
relay-log-info-repository 	= TABLE
#sync-master-info 		= 1
#slave-parallel-workers 		= 2
#binlog-checksum     		= CRC32
#master-verify-checksum		= 1
#slave-sql-verify-checksum 	= 1
#binlog-rows-query-log-events	= 1


#ssd
#innodb_flush_method 		= O_DIRECT 

#A recommended value is 2 times the number of CPUs plus the number of disks.
#5.5.8 default 0
innodb_thread_concurrency 	= 32
#innodb_log_group_home_dir 	= /data/mysql/iblogs
innodb_log_files_in_group 	= 2
innodb_flush_log_at_trx_commit  = 2
#sync_binlog=15
innodb_support_xa		= 0
innodb_file_per_table		= 1


innodb_log_file_size 		= 1G #25% *buffer pool size (1G)
innodb_log_buffer_size 		= 96M


#suppression of duplicate-key and no-key-found errors
#slave_exec_mode		= IDEMPOTENT




[mysqld3306]
port                            = 3306
socket                          = /data/mysql/msg_attachment/mysql.sock
pid-file                        = /data/mysql/msg_attachment/mysql.pid
server-id                       = 163706
datadir                         = /data/mysql/msg_attachment/var


[mysql]
no-auto-rehash
[mysqldump]
quick
max_allowed_packet 		= 16M

[isamchk]
key_buffer 			= 20M
sort_buffer_size 		= 20M
read_buffer 			= 2M
write_buffer 			= 2M

[myisamchk]
key_buffer 			= 40M
sort_buffer_size 		= 40M
read_buffer 			= 8M
write_buffer 			= 8M

[mysqlhotcopy]
interactive-timeout
[mysqld_multi]
mysqld=mysqld_safe

